<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta property="og:title" content="Debotz" />
    <meta name="keywords" content="Aplikasi, Adobe, Software" />
    <meta property="og:title" content="Debotz" />
    <meta
      property="og:description"
      content="Debotz adalah website yang menyediakan berbagai software berkualitas untuk memenuhi kebutuhan teknologi Anda. Dengan beragam pilihan aplikasi dan tools, Debotz berfokus pada memberikan solusi praktis untuk bisnis, pengembangan, dan penggunaan sehari-hari. Semua software yang tersedia dapat diunduh dengan mudah, dengan dukungan teknis yang andal dan pembaruan terbaru untuk memastikan performa optimal."
    />

    <meta
      property="og:image"
      content="https://res.cloudinary.com/dwpnsfghy/image/upload/v1727440966/fniygrbsecuvt4bbjir0.png"
    />
    <meta property="og:url" content="#" />
    <meta property="og:site_name" content="Debotz" />
    <title>Debotz-Login</title>
    <link
      rel="icon"
      href="https://res.cloudinary.com/dwpnsfghy/image/upload/v1727440966/fniygrbsecuvt4bbjir0.png"
      type="image/x-icon"
    />
    <script src="https://accounts.google.com/gsi/client" async defer></script>
    <link rel="stylesheet" href="css/Login/Login.css" />
  </head>
  <body>
    <form action="Admin/Profile.html" class="form" id="login-form">
        <p>Welcome,<span>sign in to continue</span></p>
        
        <div id="g_id_onload"
             data-client_id="401943700498-hvht2ri0fp01vel82gtrvcdc47uq29h6.apps.googleusercontent.com"
             data-callback="handleCredentialResponse">
        </div>
        <div class="g_id_signin" data-type="standard"></div>

        <div class="separator">
            <div></div>
            <span>OR</span>
            <div></div>
        </div>

        <input type="text" placeholder="Username" name="username" required>
        <input type="email" placeholder="Email" name="email" required>
        
        <button class="oauthButton" type="submit">
            Continue
            <svg class="icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="m6 17 5-5-5-5"></path>
                <path d="m13 17 5-5-5-5"></path>
            </svg>
        </button>
    </form>

    <script>
        function handleCredentialResponse(response) {
            const responsePayload = decodeJwtResponse(response.credential);
            
            // Store Google user data in localStorage
            localStorage.setItem('googleUser', JSON.stringify({
                name: responsePayload.name,
                email: responsePayload.email
            }));

            // Redirect to profile page
            window.location.href = 'Admin/Profile.html';
        }

        function decodeJwtResponse(token) {
            var base64Url = token.split('.')[1];
            var base64 = base64Url.replace(/-/g, '+').replace(/_/g, '/');
            var jsonPayload = decodeURIComponent(atob(base64).split('').map(function(c) {
                return '%' + ('00' + c.charCodeAt(0).toString(16)).slice(-2);
            }).join(''));

            return JSON.parse(jsonPayload);
        }

        // Handle form submission
        document.getElementById('login-form').addEventListener('submit', function(e) {
            e.preventDefault();
            var username = this.elements['username'].value;
            var email = this.elements['email'].value;
            window.location.href = `Admin/Profile.html?username=${encodeURIComponent(username)}&email=${encodeURIComponent(email)}`;
        });
    </script>
  </body>
</html>
